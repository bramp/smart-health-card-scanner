<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8">
  <title>Smart Health Card Reader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <!-- Move this into our main.css -->
  <link href="https://unpkg.com/base-css-theme@1.1.3/base.css" rel="stylesheet">
  <script src="https://unpkg.com/base-css-theme@1.1.3/base.js"></script>
  <link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pretty-print-json@1.0/dist/pretty-print-json.dark-mode.css>

  <style type="text/css">
    pre, textarea {
      font-family: monospace, monospace;
      background: #002b36;
    }

    textarea {
      height: 16em;
      color: silver;
    }
  </style>

</head>

<body>

  <div class="container">

    <h1>Inspect the contents of your Smart Health Card</h1>

    <p>Scan or Enter your Smart Health Card (such as the ones that <a href="https://myvaccinerecord.cdph.ca.gov/">California is now issuing</a>) details, and this will display the encoded contents. This is processed completely in your web browser, no information is sent to me or anyone else.</p>

    <h2>Scan (the QR code):</h2>

    <video id=qr width=100%></video>

    <h2>Or enter the QR code contents manually:</h2>
    <textarea id=input rows="16" required></textarea>   

    <div class="alerts-banner">
      <div id="error" style="display: none;" class="alert alert-error">The requested operation could not be completed.</div>
    </div>

    <h2>Decoded:</h2>

    <h3>Header:</h3>
    <pre id="header"></pre>

    <h3>Payload:</h3>
    <pre id="payload"></pre>

    <!--
    <h3>Signature:</h3>
    <pre id="signature"></pre>
    -->
    <br/>
    <p style="text-align: right">
      By Andrew Brampton (<a href="https://bramp.net">bramp.net</a>)<br/>

      <a href="https://github.com/bramp/smart-health-card-scanner">github.com/bramp/smart-health-card-scanner</a><br/>

      Using <a href="https://html5boilerplate.com/">HTML5 Boilerplate</a>, <a href="https://github.com/ianc1/BaseCSS">BaseCSS</a>, <a href="https://github.com/nimiq/qr-scanner">qr-scanner</a>, <a href="https://github.com/brianloveswords/base64url">base64url</a>, <a href="https://github.com/nodeca/pako">pako</a>, and <a href="https://pretty-print-json.js.org/">pretty-print-json</a>
    </p>
  </div>

  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('set', 'anonymizeIp', true); ga('set', 'transport', 'beacon'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>
